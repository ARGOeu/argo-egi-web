<!DOCTYPE html>
<html  xmlns:e="http://software.in2p3.fr/lavoisier/entries.xsd"
       xmlns:tpl="http://software.in2p3.fr/lavoisier/template.xsd"
       tpl:extends="http://localhost:8080/lavoisier/_default_?accept=html">

<body>
<!-- Right side column. Contains the navbar and content of the page -->
<div id="wrapper">

    <aside tpl:if="/e:entries/e:entry/Site" class="left-side" id="left-side">
        <section class="sidebar">
        <ul class="sidebar-menu" style="list-style:none;">

            <li tpl:foreach="/e:entries/e:entry[@key=parent::e:entries/@ngi or parent::e:entries/@ngi='all']" style="padding-left:20px;">
                <a   href="#{{@key}}" >
                        <i class="fa fa-angle-double-left" style="padding:5px"> </i>
                        <span> {{@key}} </span>
                    <i class="fa fa-angle-double-right" style="padding:5px"> </i>

                </a>


             </li>


        </ul>
        </section>
    </aside>

<aside class="right-side" id="right-side">
    <!-- Content Header (Page header) -->
    <section class="content-header" id="content-header">
        <h1>
            Availabilities Reliabilities Reports
            <small>League Report</small>
        </h1>

    </section>

    <!-- Main content -->
    <section class="content" id="content">






        <div  class="box box-primary">

            <div class="box-header">
                        <h3 class="box-title">{{/e:entries/@description}} - POEM PROFILE : {{/e:entries/@poems}} <br/>
                            <a href="?accept=csv" title="CSV report"><span style="margin:10px;" class="btn btn-primary">CSV</span> </a>
                            <a href="?accept=xml" title="XML report"><span style="margin:10px" class="btn btn-primary">XML</span></a>
                            <a  tpl:if="/e:entries/@view!='site_reports'" href="/lavoisier/render_chart?view={{/e:entries/@view}}&amp;type=availability&amp;ngi=all"   title="Chart">
                                <span style="margin:15px" class="btn btn-primary"><i class="fa fa-bar-chart-o"> </i>  AVAILABILITY</span>
                            </a>
                            <a  tpl:if="/e:entries/@view!='site_reports'" href="/lavoisier/render_chart?view={{/e:entries/@view}}&amp;type=reliability&amp;ngi=all"   title="Chart">
                                <span style="margin:15px" class="btn btn-primary"><i class="fa fa-bar-chart-o"> </i>  RELIABILITY</span>
                            </a>




                        </h3>
            </div>
       </div>

        <!-- case NGI-->


        <div tpl:if="/e:entries/e:entry/Ngi">
                        <div class="box box-primary" id="table" >
                            <div class="box-header">
                                <h3 class="box-title">Availabilities Reliabilities Table

                            </h3>
                                <div class="pull-right" style="margin-right:11px">
                                    <span class="label label-success" style="margin:4px">Av &lt; 80%</span>
                                    <span class="label label-danger" style="margin:4px"> Av &gt; 80%</span>
                                    <span class="label label-success" style="margin:10px">Re &lt; 85%</span>
                                    <span class="label label-danger" style="margin:4px"> Re &gt; 85%</span>
                                </div>

                            </div>
                            <div class="box-body table-responsive">
                            <table id="dataTable" class="table table-bordered table-hover table-striped">

                                <thead>
                                <tr>
                                    <th>NGI</th>


                                    <th>
                                        {{/e:entries/@month1}}
                                    </th>
                                    <th>
                                        {{/e:entries/@month2}}
                                    </th>
                                    <th>
                                        {{/e:entries/@month3}}
                                    </th>

                                </tr>
                                </thead>


                            <tbody>
                                <tr  tpl:foreach="/e:entries/e:entry/Ngi">


                                    <td tpl:if="/e:entries/@details" class="ngi"><a href="/lavoisier/{{/e:entries/@details}}?ngi={{@NGI}}">{{@NGI}}</a></td>
                                    <td tpl:else="">{{@NGI}}</td>



                                    <td  tpl:if="Availability[@timestamp=ancestor::e:entries/@month1]" >
                                        <a   href="/lavoisier/{{/e:entries/@related_view}}?granularity=DAILY&amp;start_date={{/e:entries/@month1}}-01&amp;end_date={{/e:entries/@month2}}-01&amp;ngi={{@NGI}}">
                                            <span class="avCheck label" title="{{format-number(Availability[@timestamp=ancestor::e:entries/@month1]/@availability,'#.00')}}" >{{format-number(Availability[@timestamp=ancestor::e:entries/@month1]/@availability,'#.00')}}</span>
                                            <span  style="margin-left:10px" class="reCheck label" title="{{format-number(Availability[@timestamp=ancestor::e:entries/@month1]/@reliability,'#.00')}}" >{{format-number(Availability[@timestamp=ancestor::e:entries/@month1]/@reliability,'#.00')}}</span>

                                        </a>

                                    </td>
                                    <td tpl:else="">
                                        <span class="avCheck label label-default">N.A</span>
                                        <span  style="margin-left:10px"  class="reCheck label label-default">N.A</span>

                                    </td>


                                    <td  tpl:if="Availability[@timestamp=ancestor::e:entries/@month2]" >
                                        <a   href="/lavoisier/{{/e:entries/@related_view}}?granularity=DAILY&amp;start_date={{/e:entries/@month2}}-01&amp;end_date={{/e:entries/@month3}}-01&amp;ngi={{@NGI}}">
                                        <span   class="label avCheck" title="{{format-number(Availability[@timestamp=ancestor::e:entries/@month2]/@availability,'#.00')}}" >{{format-number(Availability[@timestamp=ancestor::e:entries/@month2]/@availability,'#.00')}}</span>
                                        <span style="margin-left:10px"  class="label reCheck" title="{{format-number(Availability[@timestamp=ancestor::e:entries/@month2]/@reliability,'#.00')}}" >{{format-number(Availability[@timestamp=ancestor::e:entries/@month2]/@reliability,'#.00')}}</span>
                                        </a>
                                    </td>
                                    <td tpl:else="">
                                        <span class="avCheck label label-default">N.A</span>
                                        <span  style="margin-left:10px"  class="reCheck label label-default">N.A</span>

                                    </td>

                                    <td  tpl:if="Availability[@timestamp=ancestor::e:entries/@month3]" >
                                        <a   href="/lavoisier/{{/e:entries/@related_view}}?granularity=DAILY&amp;start_date={{/e:entries/@month3}}-01&amp;end_date={{/e:entries/@month4}}-01&amp;ngi={{@NGI}}">
                                        <span class="avCheck label" title="{{format-number(Availability[@timestamp=ancestor::e:entries/@month3]/@availability,'#.00')}}" >{{format-number(Availability[@timestamp=ancestor::e:entries/@month3]/@availability,'#.00')}}</span>
                                        <span  style="margin-left:10px"  class="reCheck label" title="{{format-number(Availability[@timestamp=ancestor::e:entries/@month3]/@reliability,'#.00')}}" >{{format-number(Availability[@timestamp=ancestor::e:entries/@month3]/@reliability,'#.00')}}</span>
                                        </a>
                                    </td>
                                    <td tpl:else="">
                                        <span class="avCheck label label-default">N.A</span>
                                        <span  style="margin-left:10px"  class="reCheck label label-default">N.A</span>

                                    </td>
                                </tr>
                                </tbody>
                                </table>
                                
                                </div>
                            </div>

</div>

<div tpl:else="">
    <div class="box box-primary" tpl:foreach="/e:entries/e:entry[@key=parent::e:entries/@ngi or parent::e:entries/@ngi='all']">
        <a name="{{@key}}"> </a>
        <div class="box-header">
            <h3 class="box-title">
                Availabilities Reliabilities Table - {{@key}}

        </h3>
            <div class="pull-right">
                <a  href="/lavoisier/render_chart?view={{/e:entries/@view}}&amp;type=availability&amp;ngi={{@key}}"   title="Chart">
                    <span style="margin:15px" class="btn btn-primary"><i class="fa fa-bar-chart-o"> </i> AVAILABILITY</span>
                </a>
                <a  href="/lavoisier/render_chart?view={{/e:entries/@view}}&amp;type=reliability&amp;ngi={{@key}}"   title="Chart">
                    <span style="margin:15px" class="btn btn-primary"><i class="fa fa-bar-chart-o"> </i>  RELIABILITY</span>
                </a>
            </div>
         </div>
        <div class="box-body table-responsive">
            <table class="table table-bordered table-hover table-striped">
                <thead>
                <tr>
                    <th class="col-md-4">Site</th>

                    <th>
                        {{/e:entries/@month1}}
                    </th>
                    <th>
                        {{/e:entries/@month2}}
                    </th>
                    <th>
                        {{/e:entries/@month3}}
                    </th>

                </tr>
                </thead>


                <tbody>
                <tr tpl:foreach="Site">
                    <td class="col-md-4">{{@site}}</td>

                    <td  tpl:if="Availability[@timestamp=ancestor::e:entries/@month1]" >
                        <a   href="/lavoisier/{{/e:entries/@related_view}}?granularity=DAILY&amp;start_date={{/e:entries/@month1}}-01&amp;end_date={{/e:entries/@month2}}-01&amp;site={{@site}}">
                        <span class="avCheck label" title="{{format-number(Availability[@timestamp=ancestor::e:entries/@month1]/@availability,'#.00')}}" >{{format-number(Availability[@timestamp=ancestor::e:entries/@month1]/@availability,'#.00')}}</span>
                        <span class="reCheck label" style="margin-left:10px" title="{{format-number(Availability[@timestamp=ancestor::e:entries/@month1]/@reliability,'#.00')}}" >{{format-number(Availability[@timestamp=ancestor::e:entries/@month1]/@reliability,'#.00')}}</span>
                        </a>
                    </td>
                    <td tpl:else="">
                        <span class="avCheck label label-default">N.A</span>
                        <span  style="margin-left:10px"  class="reCheck label label-default">N.A</span>

                    </td>

                    <td  tpl:if="Availability[@timestamp=ancestor::e:entries/@month2]" >
                        <a   href="/lavoisier/{{/e:entries/@related_view}}?granularity=DAILY&amp;start_date={{/e:entries/@month2}}-01&amp;end_date={{/e:entries/@month3}}-01&amp;site={{@site}}">
                        <span class="avCheck label" title="{{format-number(Availability[@timestamp=ancestor::e:entries/@month2]/@availability,'#.00')}}" >{{format-number(Availability[@timestamp=ancestor::e:entries/@month2]/@availability,'#.00')}}</span>
                        <span class="reCheck label" style="margin-left:10px" title="{{format-number(Availability[@timestamp=ancestor::e:entries/@month2]/@reliability,'#.00')}}" >{{format-number(Availability[@timestamp=ancestor::e:entries/@month2]/@reliability,'#.00')}}</span>
                        </a>
                    </td>
                    <td tpl:else="">
                        <span class="avCheck label label-default">N.A</span>
                        <span  style="margin-left:10px"  class="reCheck label label-default">N.A</span>

                    </td>

                    <td  tpl:if="Availability[@timestamp=ancestor::e:entries/@month3]" >
                        <a   href="/lavoisier/{{/e:entries/@related_view}}?granularity=DAILY&amp;start_date={{/e:entries/@month3}}-01&amp;end_date={{/e:entries/@month4}}-01&amp;site={{@site}}">
                        <span class="avCheck label" title="{{format-number(Availability[@timestamp=ancestor::e:entries/@month3]/@availability,'#.00')}}" >{{format-number(Availability[@timestamp=ancestor::e:entries/@month3]/@availability,'#.00')}}</span>
                        <span class="reCheck label" style="margin-left:10px" title="{{format-number(Availability[@timestamp=ancestor::e:entries/@month3]/@reliability,'#.00')}}" >{{format-number(Availability[@timestamp=ancestor::e:entries/@month3]/@reliability,'#.00')}}</span>
                        </a>
                    </td>
                    <td tpl:else="">
                        <span class="avCheck label label-default">N.A</span>
                        <span  style="margin-left:10px"  class="reCheck label label-default">N.A</span>

                    </td>
                
                
                </tr>
                </tbody>
                </table>
            </div>



        </div>
    
    
    
</div>
                          


    

    </section><!-- /.content -->

</aside><!-- /.right-side -->



<script  src="/resource/ARGO_UI/resources/js/plugins/datatables/jquery.dataTables.js"/>
<script  src="/resource/ARGO_UI/resources/js/plugins/datatables/dataTables.bootstrap.js"/>





<script type="text/javascript">


    $(function () {
        // set the first colors
        $('td').find('span.avCheck.label').each(function () {
            $(this).addClass(getColorClass($(this).attr('title'),80));
        });

        $('td').find('span.reCheck.label').each(function () {
            $(this).addClass(getColorClass($(this).attr('title'),85));
        });

        // set the first colors
        $('td').find('span.badge').each(function () {
            $(this).addClass(getColorClass2($(this).attr('title')));
        });




        $('#dataTable').dataTable({
            "bPaginate": false,
            "bLengthChange": false,
            "bFilter": true,
            "bSort": true,
            "bInfo": true,
            "bAutoWidth": false
        });




    });








</script>



</div>
</body>
</html>