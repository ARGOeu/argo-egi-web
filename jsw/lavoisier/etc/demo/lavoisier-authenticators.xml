<config xmlns="http://software.in2p3.fr/lavoisier/config.xsd" version="16">
    <authenticators name="IP">
        <authenticator type="IPAddressAuthenticator">
            <parameter name="addresses">
                <entry>127.0.0.1</entry>
                <entry>0:0:0:0:0:0:0:1</entry>
            </parameter>
        </authenticator>
    </authenticators>
    <view name="test-IP" authenticators="IP">
        <connector type="XMLConnector"><parameter name="content" eval="user()"/></connector>
    </view>

    <authenticators name="whitelist-basic">
        <authenticator type="WhiteListHTTPBasicAuthenticator">
            <parameter name="passwords">
                <entry key="foo">37B51D194A7513E45B56F6524F2D51F2</entry>
            </parameter>
        </authenticator>
    </authenticators>
    <view name="test-whitelist-basic" authenticators="whitelist-basic">
        <connector type="XMLConnector"><parameter name="content" eval="user()"/></connector>
    </view>

    <authenticators name="whitelist-form">
        <authenticator type="WhiteListHTMLFormAuthenticator">
            <parameter name="passwords">
                <entry key="foo">37B51D194A7513E45B56F6524F2D51F2</entry>
            </parameter>
            <parameter name="form">http://localhost:8080/lavoisier/login?accept=html</parameter>
        </authenticator>
    </authenticators>
    <view name="test-whitelist-form" authenticators="whitelist-form">
        <connector type="XMLConnector"><parameter name="content" eval="user()"/></connector>
    </view>
    <view name="login">
        <connector type="XMLConnector">
            <parameter name="content"><entry/></parameter>
        </connector>
        <renderers>
            <renderer type="HTMLRenderer">
                <parameter name="template">html/login-default.html</parameter>
            </renderer>
        </renderers>
    </view>

    <authenticators name="kerberos-basic">
        <authenticator type="KerberosHTTPBasicAuthenticator">
            <parameter name="krb5conf">c:/cygwin/etc/krb5.conf</parameter>
        </authenticator>
    </authenticators>
    <view name="test-kerberos-basic" authenticators="kerberos-basic">
        <connector type="XMLConnector"><parameter name="content" eval="user()"/></connector>
    </view>

    <authenticators name="kerberos-form">
        <authenticator type="KerberosHTMLFormAuthenticator">
            <parameter name="krb5conf">c:/cygwin/etc/krb5.conf</parameter>
        </authenticator>
    </authenticators>
    <view name="test-kerberos-form" authenticators="kerberos-form">
        <connector type="XMLConnector"><parameter name="content" eval="user()"/></connector>
    </view>

    <authenticators name="CAS">
        <authenticator type="CASAuthenticator" authorized="user()='lionel.schwarz@in2p3.fr' or user()='Sylvain.Reynaud@in2p3.fr'">
            <parameter name="server" eval="property('cas.server')"/>
        </authenticator>
    </authenticators>
    <view name="test-CAS" authenticators="CAS">
        <connector type="XMLConnector"><parameter name="content" eval="user()"/></connector>
    </view>

    <authenticators name="SAML">
        <authenticator type="SAML2Authenticator">
            <parameter name="server">https://changeme</parameter>
        </authenticator>
    </authenticators>
    <view name="test-SAML" authenticators="SAML">
        <connector type="XMLConnector"><parameter name="content" eval="user()"/></connector>
    </view>

    <authenticators name="X509">
        <authenticator type="X509Authenticator" authorized="user()='EMAILADDRESS=lionel.schwarz@in2p3.fr, CN=Lionel Schwarz, OU=USR6402, O=CNRS, C=FR'
                                                         or user()='EMAILADDRESS=Sylvain.Reynaud@in2p3.fr, CN=Sylvain Reynaud, OU=USR6402, O=CNRS, C=FR'"/>
    </authenticators>
    <view name="test-X509" authenticators="X509">
        <connector type="XMLConnector"><parameter name="content" eval="user()"/></connector>
    </view>

    <authenticators name="google">
        <authenticator type="OAuth2Authenticator">
            <parameter name="authz_location">https://accounts.google.com/o/oauth2/auth</parameter>
            <parameter name="token_location">https://accounts.google.com/o/oauth2/token</parameter>
            <!-- Create your client ID here: https://console.developers.google.com/ -->
            <parameter name="client_id" eval="property('google.oauth2.client.id')"/>
            <parameter name="client_secret" eval="property('google.oauth2.client.secret')"/>
            <parameter name="scope">email profile</parameter>
        </authenticator>
    </authenticators>
    <view name="myGoogleProfile" authenticators="google">
        <connector type="HTTPConnector">
            <parameter name="url" eval="concat('https://www.googleapis.com/oauth2/v1/userinfo?access_token=', user())"/>
        </connector>
        <serializer type="JSONSerializer"/>
    </view>

    <authenticators name="fb">
        <authenticator type="OAuth2Authenticator">
            <parameter name="authz_location">https://graph.facebook.com/oauth/authorize</parameter>
            <parameter name="token_location">https://graph.facebook.com/oauth/access_token</parameter>
            <parameter name="client_id" eval="property('fb.oauth2.client.id')"/>
            <parameter name="client_secret" eval="property('fb.oauth2.client.secret')"/>
            <parameter name="scope">email</parameter>
        </authenticator>
    </authenticators>
    <view name="myFBProfile" authenticators="fb">
        <connector type="HTTPConnector">
            <parameter name="url" eval="concat('https://graph.facebook.com/me?access_token=', user())"/>
        </connector>
        <serializer type="JSONSerializer"/>
    </view>

    <authenticators name="github">
        <authenticator type="OAuth2Authenticator">
            <parameter name="authz_location">https://github.com/login/oauth/authorize</parameter>
            <parameter name="token_location">https://github.com/login/oauth/access_token</parameter>
            <parameter name="client_id" eval="property('github.oauth2.client.id')"/>
            <parameter name="client_secret" eval="property('github.oauth2.client.secret')"/>
            <parameter name="scope">user</parameter>
        </authenticator>
    </authenticators>
    <view name="myGithubProfile" authenticators="github">
        <connector type="HTTPConnector">
            <parameter name="url" eval="concat('https://api.github.com/user?access_token=', user())"/>
        </connector>
        <serializer type="JSONSerializer"/>
    </view>
</config>